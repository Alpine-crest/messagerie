<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Messagerie Sécurisée</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/openpgp@5.10.1/dist/openpgp.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
</head>
<body>
    <div id="app">
        <div class="sidebar">
            <div id="auth">
                <input id="login" placeholder="Email ou pseudo">
                <input id="password" type="password" placeholder="Mot de passe">
                <input id="totp" placeholder="Code 2FA (si activé)">
                <button id="btn_login">Connexion</button>
                <button id="btn_to_register">S'inscrire</button>
            </div>
            <div id="register" style="display:none;">
                <input id="reg_username" placeholder="Pseudo">
                <input id="reg_email" placeholder="Email">
                <input id="reg_password" type="password" placeholder="Mot de passe">
                <input id="reg_passphrase" type="password" placeholder="Passphrase clé privée">
                <button id="btn_register">Créer mon compte</button>
                <button id="btn_to_login">Déjà inscrit ?</button>
                <div id="qr2fa"></div>
            </div>
            <div id="profile" style="display:none;">
                <button onclick="exportPrivateKey()">Exporter ma clé privée</button>
                <input type="file" id="importKeyFile" style="display:none;" onchange="importPrivateKey(this)">
                <button onclick="document.getElementById('importKeyFile').click()">Importer clé privée</button>
            </div>
            <ul id="conversations"></ul>
        </div>
        <div class="main">
            <div id="header">
                <span id="current_convo"></span>
                <button id="btn_logout" style="float:right;display:none;">Déconnexion</button>
            </div>
            <div id="messages"></div>
            <div id="msgbox" style="display:none;">
                <input id="message" placeholder="Votre message">
                <button id="btn_send">Envoyer</button>
            </div>
        </div>
    </div>
    <div id="notif"></div>
    <script src="app.js"></script>
</body>
</html>